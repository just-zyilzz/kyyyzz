<!DOCTYPE html>
<html lang="id">

<head>
  <!-- Basic Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- Cache Control Headers -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- SEO Meta Tags -->
  <title>kfocean - Download YouTube, TikTok, Instagram, Threads, Facebook & Spotify</title>
  <meta name="description"
    content="kfocean - Download video dan audio dari YouTube, TikTok, Instagram, Threads, Facebook, dan Spotify dengan mudah dan cepat. Gratis, tanpa watermark, kualitas HD." />
  <meta name="keywords"
    content="kfocean, youtube downloader, tiktok downloader, instagram downloader, threads downloader, facebook downloader, spotify downloader, download video, download audio, download mp3, download mp4, tools premium" />
  <meta name="author" content="kfocean" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="language" content="Indonesian" />
  <meta name="revisit-after" content="7 days" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://kfocean.xyz/" />

  <!-- Open Graph / Facebook Meta Tags -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://kfocean.xyz/" />
  <meta property="og:title" content="kfocean - Download YouTube, TikTok, Instagram, Threads & More" />
  <meta property="og:description"
    content="Download video dan audio dari YouTube, TikTok, Instagram, Threads, Facebook, dan Spotify dengan mudah dan cepat. Gratis, tanpa watermark, kualitas HD." />
  <meta property="og:image" content="https://kfocean.xyz/logo.png" />
  <meta property="og:image:secure_url" content="https://kfocean.xyz/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="kfocean - Media Downloader Tools" />
  <meta property="og:site_name" content="kfocean" />
  <meta property="og:locale" content="id_ID" />

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://kfocean.xyz/" />
  <meta name="twitter:title" content="kfocean - Download YouTube, TikTok, Instagram, Threads & More" />
  <meta name="twitter:description"
    content="Download video dan audio dari YouTube, TikTok, Instagram, Threads, Facebook, dan Spotify dengan mudah dan cepat." />
  <meta name="twitter:image" content="https://kfocean.xyz/logo.png" />
  <meta name="twitter:image:alt" content="kfocean - Media Downloader Tools" />

  <!-- Mobile & PWA Meta Tags -->
  <meta name="theme-color" content="#667eea" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Tools Premium" />

  <!-- Favicons & Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.json" />

  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" />

  <!-- Stylesheet with cache busting -->
  <link rel="stylesheet" href="style.css?v=20260112">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "kfocean - Tools Premium",
    "description": "Download video dan audio dari YouTube, TikTok, Instagram, Threads, Facebook, dan Spotify",
    "url": "https://kfocean.xyz/",
    "applicationCategory": "MultimediaApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "YouTube Video Downloader",
      "TikTok Video Downloader",
      "Instagram Video Downloader",
      "Threads Video Downloader",
      "Facebook Video Downloader",
      "Spotify Music Downloader",
      "MP3 Audio Converter",
      "MP4 Video Converter"
    ],
    "browserRequirements": "Requires JavaScript. Requires HTML5.",
    "softwareVersion": "1.0",
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "1250"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "kfocean",
    "url": "https://kfocean.xyz/",
    "logo": "https://kfocean.xyz/logo.png",
    "sameAs": [
      "https://instagram.com/zyilzzz",
      "https://github.com/just-zyilzz"
    ]
  }
  </script>
</head>

<body>
  <div id="authSection" style="position: fixed; top: 16px; right: 16px; z-index: 2000; display: flex; align-items: center; gap: 10px;">
    <a id="loginBtn" href="/api/auth?action=login" style="display: inline-flex; align-items: center; gap: 8px; background: #333; color: #fff; padding: 6px 12px; border-radius: 20px; text-decoration: none; font-size: 13px;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577 0-.285-.01-1-.02-1.96-3.338.726-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 1.205.084 1.71 1.236 1.71 1.236 1.07 1.835 2.807 1.305 3.492.998.108-.775.418-1.305.762-1.605-2.665-.3-5.467-1.332-5.467-5.93 0-1.31.468-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.43.37.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.694.825.576C20.565 22.092 24 17.592 24 12.297 24 5.67 18.627.297 12 .297z"/>
      </svg>
      <span>Login via GitHub</span>
    </a>
    <div id="userSection" style="display: none; align-items: center; gap: 8px;">
      <span id="usernameDisplay" style="font-weight: 600; color: #333;"></span>
      <button id="historyBtn" style="background: #667eea; color: white; border: none; padding: 6px 10px; border-radius: 16px; font-size: 12px; cursor: pointer;">History</button>
      <button id="logoutBtn" style="background: #ff6b6b; color: white; border: none; padding: 6px 10px; border-radius: 16px; font-size: 12px; cursor: pointer;">Logout</button>
    </div>
  </div>
  <div class="container">
    <div class="glass-blob" aria-hidden="true"></div>

    <h1>Download Video & Audio - Tools Premium</h1>

    <div
      style="background:#e0e0ff; border:1px solid #c0c0ff; border-radius:10px; padding:12px; margin:15px 0; font-size:14px; color:#444;">
      <strong>Supported:</strong> YouTube, TikTok, Instagram, Spotify ðŸŽµ
    </div>

    <div class="input-group">
      <div class="input-wrapper">
        <button class="search-type-toggle" id="searchTypeToggle" data-type="youtube" title="Click to switch">
          /yt
        </button>
        <input type="text" id="urlInput" placeholder="Paste YouTube, TikTok, Instagram, or Spotify link..." />
      </div>
      <button id="fetchBtn">Download</button>
    </div>

    <div class="loading">
      <div class="spinner"></div>
      <p>Mengambil metadata...</p>
    </div>

    <div class="result"></div>

    <!-- History Modal -->
    <div id="historyModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background: white; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; border-radius: 10px; padding: 20px; position: relative;">
            <span class="close-modal" style="position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer;">&times;</span>
            <h2 style="margin-top: 0; margin-bottom: 15px; color: #333;">Download History</h2>
            <div id="historyList" class="history-list">
                <p>Loading...</p>
            </div>
        </div>
    </div>

    <!-- Popup notification -->
    <div id="popup" class="popup"></div>

    <!-- Social icons -->
    <div class="social-bar" aria-hidden="false">
      <a class="social-btn" href="https://instagram.com/zyilzzz" target="_blank" rel="noopener noreferrer"
        aria-label="Instagram" title="Instagram">
        <svg class="social-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4" />
          <path d="M12 8.5a3.5 3.5 0 100 7 3.5 3.5 0 000-7z" stroke="currentColor" stroke-width="1.4" />
          <circle cx="17.5" cy="6.5" r="0.5" fill="currentColor" />
        </svg>
      </a>
      <a class="social-btn" href="https://github.com/just-zyilzz" target="_blank" rel="noopener noreferrer"
        aria-label="GitHub" title="GitHub">
        <svg class="social-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577 0-.285-.01-1-.02-1.96-3.338.726-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 1.205.084 1.71 1.236 1.71 1.236 1.07 1.835 2.807 1.305 3.492.998.108-.775.418-1.305.762-1.605-2.665-.3-5.467-1.332-5.467-5.93 0-1.31.468-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.43.37.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.694.825.576C20.565 22.092 24 17.592 24 12.297 24 5.67 18.627.297 12 .297z" />
        </svg>
      </a>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-inner">
        <div></div>
        <div class="footer-actions">
          <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">ðŸŒ™</button>
        </div>
      </div>
    </footer>
  </div>

  <!-- PWA Install Prompt -->
  <div id="installPrompt" class="install-prompt hidden">
    <div class="install-prompt-content">
      <div class="install-prompt-icon">ðŸ“±</div>
      <div class="install-prompt-text">
        <strong>Install kfocean App</strong>
        <p>Install aplikasi untuk akses lebih cepat & offline!</p>
      </div>
      <button id="installBtn" class="install-btn">Install</button>
      <button id="dismissInstallBtn" class="dismiss-btn" aria-label="Dismiss">âœ•</button>
    </div>
  </div>

  <script src="script.js?v=20260112"></script>

  <!-- Service Worker Registration -->
  <script>
    // Register Service Worker with update detection
    if ('serviceWorker' in navigator) {
      let newWorkerAvailable = false;

      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('âœ… Service Worker registered successfully:', registration.scope);

            // Check for updates periodically
            setInterval(() => {
              registration.update();
            }, 60000); // Check every minute

            // Detect when new service worker is waiting
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;

              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New service worker is ready
                  newWorkerAvailable = true;
                  showUpdateNotification();
                }
              });
            });
          })
          .catch((error) => {
            console.error('âŒ Service Worker registration failed:', error);
          });

        // Listen for messages from service worker
        navigator.serviceWorker.addEventListener('message', (event) => {
          if (event.data && event.data.type === 'NEW_VERSION_AVAILABLE') {
            console.log('ðŸ”” New version available:', event.data.version);
            showUpdateNotification();
          }
        });

        // Handle controller change (new SW activated)
        navigator.serviceWorker.addEventListener('controllerchange', () => {
          if (newWorkerAvailable) {
            console.log('ðŸ”„ New service worker activated, reloading page...');
            window.location.reload();
          }
        });
      });

      // Function to show update notification
      function showUpdateNotification() {
        const updateBanner = document.createElement('div');
        updateBanner.id = 'updateBanner';
        updateBanner.className = 'update-banner';
        updateBanner.innerHTML = `
          <div class="update-banner-content">
            <span>ðŸŽ‰ Versi baru tersedia!</span>
            <button onclick="reloadPage()" class="update-btn">Update Sekarang</button>
          </div>
        `;
        document.body.appendChild(updateBanner);

        // Show banner with animation
        setTimeout(() => updateBanner.classList.add('show'), 100);
      }

      // Function to reload page
      window.reloadPage = function () {
        window.location.reload(true);
      };
    }
  </script>
</body>

</html>
